<link rel="stylesheet" href="/css/profile.css">
<link rel="stylesheet" href="/css/profileForm.css">


<div class="container py-5">
    <div class="row d-flex justify-content-center align-items-center">
        <div class="col-sm-12 col-md-12 col-xl-12">
            <div class="card bg-c-yellow" style="border-radius: 15px;">
                <div class="card-body d-flex row flex-md-row flex-sm-column">
                    <div class="mt-3 mb-4 mr-5 col-md-3 col-sm-12">
                        <img src="<%= profile_user.profile?.img?.filepath || '/img/unknown_user.png' %>"
                            class="rounded-circle img-fluid about-avatar" />
                    </div>
                    <div class="d-flex flex-column col-md-7 col-sm-12">
                        <h4 class="card-title dark-color display-4">
                            <%= profile_user.username %>
                                <span type="button" id="EditProfile" class="edit btn-floating btn-blue-grey btn-sm"
                                    data-bs-toggle="offcanvas" data-bs-target="#offcanvasWithBothOptions"
                                    aria-controls="offcanvasWithBothOptions">
                                    <i class="fas fa-edit"> </i>
                                </span>
                        </h4>


                        <h6 class="text-dark">
                            <%= profile_user.profile.education %>
                        </h6>
                        <%if(profile_user.profile?.website){%>

                            <div class="websitelink">
                                <a target="_blank" href=" <%=profile_user.profile.website%>"> <i
                                        class="fas fa-external-link-alt"></i>
                                    <%=profile_user.profile.website%>
                                </a>
                            </div>
                            <%}%>
                                <%if(profile_user.profile.bio){%>
                                    <p class="fs-5 lh-base fw-normal">
                                        <%= profile_user.profile.bio %>
                                    </p>
                                    <%}else{%>

                                        <p class="text-muted">Add
                                            Complete Your Profile By Clicking Edit Button </p>
                                        <%}%>

                    </div>

                </div>
            </div>

        </div>
    </div>


    <div class="row d-flex justify-content-center align-items-center">

        <div class="col-11 p-0 card counter d-flex flex-row" style="border-radius: 15px; background-color: #93e2bb;">

            <div class="card-body">
                <div class="count-data text-center">
                    <h1 class="card-title count" data-to="500" data-speed="500">
                        <p>
                            <%=profile_user.questions.length%>
                        </p>
                    </h1>
                    <p class="m-0px font-w-600">TotalQuestion</p>
                </div>
            </div>
            <div class="card-body">
                <div class="count-data text-center">
                    <h1 class=" count card-title" data-to="150" data-speed="150">
                        <%=profile_user.solved.length%>
                    </h1>
                    <p class="m-0px font-w-600">
                        Solved
                    </p>
                </div>
            </div>
            <div class="card-body">
                <div class="count-data text-center">
                    <h1 class="card-title count" data-to="850" data-speed="850">
                        <%=profile_user.unsolved.length%>
                    </h1>
                    <p class="m-0px font-w-600">
                        unSolved
                    </p>
                </div>
            </div>
            <div class="card-body">
                <div class="count-data text-center">
                    <h1 class="card-title count" data-to="190" data-speed="190">
                        <%=profile_user.retry.length%>
                    </h1>
                    <p class="m-0px font-w-600">
                        Redo
                    </p>
                </div>
            </div>

        </div>

        <div class="offcanvas offcanvas-end" data-bs-scroll="true" tabindex="-1" id="offcanvasWithBothOptions"
            aria-labelledby="offcanvasWithBothOptionsLabel">
            <div class="offcanvas-header">
                <h5 class="offcanvas-title" id="offcanvasWithBothOptionsLabel">Update Profle</h5>
                <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas"
                    aria-label="Close"></button>
            </div>
            <div class="offcanvas-body">
                <form action="/users/update" id="update_form" method="post" enctype="multipart/form-data">
                    <div class=" registration-form">
                        <div class="form-icon">
                            <span><i class="far fa-user"></i></span>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Name</label>

                            <input type="text" class="form-control item" id="username" name="username"
                                placeholder="Username" value="<%= profile_user.username %> ">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Education</label>

                            <input type="text" class="form-control item" id="Education" name="education"
                                value="<%= profile_user.profile.education %> " placeholder="Education">
                        </div>

                        <div class="form-group">
                            <label class="form-label">Website</label>

                            <input type="url" class="form-control item" id="website" name="website"
                                value="<%= profile_user.profile.website %> " placeholder="url">
                        </div>

                        <div class="form-group">
                            <label class="form-label">Bio</label>

                            <textarea class="form-control item" id="bio" name="bio"
                                placeholder="Describe yourself here..."><%= profile_user.profile.bio%></textarea>
                        </div>

                        <div class="form-group" id="upload">
                            <!-- <input type="file" class="form-control item" name="image" id="upload-Images" single> -->
                            <label class="form-label">Upload Profile Photo</label>
                            <input type="file" class="form-control item" name="image" id="upload-Images">

                        </div>

                        <div class="form-group">
                            <button type="submit" class="btn btn-block create-account">Update</button>
                        </div>

                    </div>

                </form>

            </div>
        </div>



    </div>
</div>


<!-- </section> -->
<script src="/js/userprofile.js"></script>