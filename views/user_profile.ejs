<link rel="stylesheet" href="/css/profile.css">
<link rel="stylesheet" href="/css/profileForm.css">
<div class="container profile">
    <div class="row card d-flex flex-lg-row flex-md-row flex-sm-column" onload="myFunction()">

        <div class="col-lg-2 card-body d-flex justify-content-center align-content-between">

            <div class="offcanvas offcanvas-end" data-bs-scroll="true" tabindex="-1" id="offcanvasWithBothOptions"
                aria-labelledby="offcanvasWithBothOptionsLabel">
                <div class="offcanvas-header">
                    <h5 class="offcanvas-title" id="offcanvasWithBothOptionsLabel">Update Profle</h5>
                    <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas"
                        aria-label="Close"></button>
                </div>
                <div class="offcanvas-body">
                    <form action="/users/update" id="update_form" method="post" enctype="multipart/form-data">
                        <div class=" registration-form">
                            <div class="form-icon">
                                <span><i class="far fa-user"></i></span>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Name</label>

                                <input type="text" class="form-control item" id="username" name="username"
                                    placeholder="Username" value="<%= profile_user.username %> ">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Education</label>

                                <input type="text" class="form-control item" id="Education" name="education"
                                    value="<%= profile_user.profile.education %> " placeholder="Education">
                            </div>

                            <div class="form-group">
                                <label class="form-label">Website</label>

                                <input type="url" class="form-control item" id="website" name="website"
                                    value="<%= profile_user.profile.website %> " placeholder="url">
                            </div>

                            <div class="form-group">
                                <label class="form-label">Bio</label>

                                <textarea class="form-control item" id="bio" name="bio" placeholder="Describe yourself here..."><%= profile_user.profile.bio%>
</textarea>
                            </div>

                            <div class="form-group" id="upload">
                                <!-- <input type="file" class="form-control item" name="image" id="upload-Images" single> -->
                                <label class="form-label">Upload Profile Photo</label>
                                <input type="file" class="form-control item" name="image" id="upload-Images">

                            </div>

                            <div class="form-group">
                                <button type="submit" class="btn btn-block create-account">Update</button>
                            </div>

                        </div>

                    </form>

                </div>
            </div>
            <img src="<%= profile_user.profile?.img?.filepath || '/img/unknown_user.png' %>"
                class="float-start img-fluid about-avatar border border-primary" draggable="false " alt="proflephoto">

        </div>
        <div class="col-lg-8 card-body">
            <h4 class="card-title dark-color fade-in-left">
                <%= profile_user.username %>

                    <span type="button" id="EditProfile" class="edit btn-floating btn-blue-grey btn-sm"
                        data-bs-toggle="offcanvas" data-bs-target="#offcanvasWithBothOptions"
                        aria-controls="offcanvasWithBothOptions">
                        <i class="fas fa-edit"> </i>
                    </span>
            </h4>


            <h6 class="text-dark">
                <%= profile_user.profile.education %>
            </h6>
            <%if(profile_user.profile?.website){%>

                <div class="websitelink">
                    <a target="_blank" href=" <%=profile_user.profile.website%>"> <i
                            class="fas fa-external-link-alt"></i>
                        <%=profile_user.profile.website%>
                    </a>
                </div>
                <%}%>
                    <%if(profile_user.profile.bio){%>
                        <p class="textbio">
                            <%= profile_user.profile.bio %>
                        </p>
                        <%}else{%>

                            <p class="text-muted">Add
                                Your Bio
                                and Upate Your
                                ProfilePhoto </p>
                            <%}%>


        </div>

    </div>



    <div class="card counter bg-c-green shadow-2 d-flex flex-row">

        <div class="data-box card-body">
            <div class="count-data text-center">
                <h1 class="card-title count" data-to="500" data-speed="500">
                    <p>
                        <%=profile_user.questions.length%>
                    </p>
                </h1>
                <p class="m-0px font-w-600">TotalQuestion</p>
            </div>
        </div>
        <div class="data-box card-body">
            <div class="count-data text-center">
                <h1 class=" count card-title" data-to="150" data-speed="150">
                    <%=profile_user.solved.length%>
                </h1>
                <p class="m-0px font-w-600">
                    Solved
                </p>
            </div>
        </div>
        <div class="data-box card-body">
            <div class="count-data text-center">
                <h1 class="card-title count" data-to="850" data-speed="850">
                    <%=profile_user.unsolved.length%>
                </h1>
                <p class="m-0px font-w-600">
                    unSolved
                </p>
            </div>
        </div>
        <div class="data-box card-body">
            <div class="count-data text-center">
                <h1 class="card-title count" data-to="190" data-speed="190">
                    <%=profile_user.retry.length%>
                </h1>
                <p class="m-0px font-w-600">
                    Redo
                </p>
            </div>
        </div>

    </div>
</div>
<!-- </section> -->
<script src="/js/userprofile.js"></script>