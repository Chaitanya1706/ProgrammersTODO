<link rel="stylesheet" href="/css/profile.css">
<link rel="stylesheet" href="/css/profileForm.css">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
<section class="section about-section gray-bg" id="about">
    <div class="container">
        <div class="row">
            <div class="col-12 d-flex row flex-md-row flex-sm-column justify-content-center">
                <div class="col-4">
                    <div class="about-avatar d-flex align-items-center">
                        <img src="<%= profile_user.profile?.img?.filepath || '/img/unknown_user.png' %>"
                            class="rounded-circle img-fluid">
                    </div>
                </div>
                <div class="col-lg-5">
                    <div class="about-text go-to">
                        <h3 class="dark-color display-5">
                            <%= profile_user.username %>
                                <span type="button" id="EditProfile" class="edit btn-floating btn-blue-grey btn-sm"
                                    data-bs-toggle="offcanvas" data-bs-target="#offcanvasWithBothOptions"
                                    aria-controls="offcanvasWithBothOptions">
                                    <i class="fas fa-edit"> </i>
                                </span>
                        </h3>
                        <h6 class="theme-color lead">
                            <%= profile_user.profile.education %>
                        </h6>

                        <%if(profile_user.profile?.website){%>

                            <div class="websitelink">
                                <a target="_blank" href=" <%=profile_user.profile.website%>"> <i
                                        class="fas fa-external-link-alt"></i>
                                    <%=profile_user.profile.website%>
                                </a>
                            </div>
                            <%}%>

                                <%if(profile_user.profile.bio){%>
                                    <p>
                                        <%= profile_user.profile.bio %>
                                    </p>
                                    <%}else{%>

                                        <p class="text-muted">
                                            Complete Your Profile By Clicking Edit Button </p>
                                        <%}%>



                    </div>
                </div>
            </div>
        </div>


        <div class="counter">
            <div class="row">
                <div class="col-6 col-lg-3">
                    <div class="count-data text-center">
                        <h6 class="count h2" data-to="500" data-speed="500">

                            <%=profile_user.questions.length%>

                        </h6>
                        <p class="m-0px font-w-600">Total Question</p>
                    </div>
                </div>
                <div class="col-6 col-lg-3">
                    <div class="count-data text-center">
                        <h6 class="count h2" data-to="150" data-speed="150">
                            <%=profile_user.solved.length%>
                        </h6>
                        <p class="m-0px font-w-600">Solved</p>
                    </div>
                </div>
                <div class="col-6 col-lg-3">
                    <div class="count-data text-center">
                        <h6 class="count h2" data-to="850" data-speed="850">
                            <%=profile_user.unsolved.length%>
                        </h6>
                        <p class="m-0px font-w-600">UnSolved</p>
                    </div>
                </div>
                <div class="col-6 col-lg-3">
                    <div class="count-data text-center">
                        <h6 class="count h2" data-to="190" data-speed="190">
                            <%=profile_user.retry.length%>
                        </h6>
                        <p class="m-0px font-w-600">Redo</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="offcanvas offcanvas-end" data-bs-scroll="true" tabindex="-1" id="offcanvasWithBothOptions"
        aria-labelledby="offcanvasWithBothOptionsLabel">
        <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="offcanvasWithBothOptionsLabel">Update Profle</h5>
            <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
        </div>
        <div class="offcanvas-body">
            <form action="/users/update" id="update_form" method="post" enctype="multipart/form-data">
                <div class=" registration-form">
                    <div class="form-icon">
                        <span><i class="far fa-user"></i></span>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Name</label>

                        <input type="text" class="form-control item" id="username" name="username"
                            placeholder="Username" value="<%= profile_user.username %>" readonly>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Education</label>

                        <input type="text" class="form-control item" id="Education" name="education"
                            value="<%= profile_user.profile.education %> " placeholder="Education">
                    </div>

                    <div class="form-group">
                        <label class="form-label">Website</label>

                        <input type="url" class="form-control item" id="website" name="website"
                            value="<%= profile_user.profile.website %> " placeholder="url">
                    </div>

                    <div class="form-group">
                        <label class="form-label">Bio</label>

                        <textarea class="form-control item" id="bio" name="bio" placeholder="Describe yourself here..."
                            <%- profile_user._id=='61ebb6594590e3df4eece8f2' ?'readonly':'' %>
                        ><%= profile_user.profile.bio%></textarea>
                    </div>

                    <div class="form-group" id="upload">
                        <!-- <input type="file" class="form-control item" name="image" id="upload-Images" single> -->
                        <label class="form-label">Upload Profile Photo</label>
                        <input name="image" type="file" class="form-control" id="customFile">

                    </div>

                    <div class="form-group">
                        <button type="submit" class="btn btn-block create-account">Update</button>
                    </div>

                </div>

            </form>

        </div>
    </div>

</section>

<script src="/js/userprofile.js"></script>